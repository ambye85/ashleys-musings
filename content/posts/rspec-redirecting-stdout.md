---
title: "Rspec - redirecting stdout"
date: 2018-10-29T12:00:00+01:00
draft: false
---
Have you ever found yourself wishing that during unit testing you could hide the terminal output generated by your program? With RSpec, this is pretty simple. In fact, it’s just vanilla Ruby as we’ll see.

To hide terminal output during unit tests, we need to redirect where Ruby sends output. On *nix based systems, we typically do this by sending output to `/dev/null`:

```ruby
before(:all) do
  @original_stdout = $stdout
  @original_stderr = $stderr
  $stdout = File.open(File::NULL, 'w')
  $stderr = File.open(File::NULL, 'w')
end
```

Here, we take the existing standard output and standard error and save them to a temporary variable, i.e. `@original_stdout`. Then we open a new file, in this case the Ruby constant for `/dev/null`, and make sure the file has write permissions.

Now we can run our tests and not let terminal output get in the way. But what happens when we finish running our tests and need to restore the original standard output and standard error?

```ruby
after(:all) do
  $stdout = @original_stdout
  $stderr = @original_stderr
  @original_stdout = nil
  @original_stderr = nil
end
```

With these two blocks of code running in our unit tests (before all tests have run and again after all tests have run), we can prevent any of our program’s output from being written to the terminal. This gives us a nice, clutter free environment for viewing test results.
